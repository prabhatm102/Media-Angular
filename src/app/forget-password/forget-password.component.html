<div class="container">
    <div class="row">
        <div class="col-6 offset-3 mt-5  shadow p-3 mb-5 bg-body rounded">
            <div class="fs-4 text-center">Change Password</div>
            <form [formGroup]="form" (ngSubmit)="changePassword(oldPassword.value,newPassword.value)">
                <div class="form-group">
                    <label for="Old password" class="form-label">Old password<span class="required">*</span></label>
                    <div class="input-group mb-3">
                        <input type="password" formControlName="oldPassword" name="oldPassword" id="oldPassword" #old
                            class="form-control">
                        <span class="input-group-text">
                            <i class="bi" [ngClass]="old.type==='text'?'bi-eye-slash-fill':'bi-eye-fill'"
                                (click)="old.type==='text'?old.type='password':old.type='text'"></i>
                        </span>
                    </div>
                    <div class="text-danger" *ngIf="oldPassword.errors?.['oldPasswordNotMatch']">Invalid old
                        password!
                    </div>
                    <div *ngIf="!oldPassword.valid && oldPassword.touched">
                        <div class="text-danger" *ngIf="oldPassword.errors?.['required']">Old password is required
                        </div>
                        <div class="text-danger" *ngIf="oldPassword.errors?.['minlength']">
                            Old password
                            must be atleast
                            {{oldPassword.errors?.['minlength']['requiredLength']}} characters</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="New password" class="form-label">New password<span class="required">*</span></label>
                    <div class="input-group mb-3">
                        <input type="password" formControlName="newPassword" name="newPassword" id="newPassword" #new
                            class="form-control">

                        <span class="input-group-text">
                            <i class="bi" [ngClass]="new.type==='text'?'bi-eye-slash-fill':'bi-eye-fill'"
                                (click)="new.type==='text'?new.type='password':new.type='text'"></i>
                        </span>

                    </div>
                    <div class="text-danger" *ngIf="newPassword.errors?.['tryNewPassword']">Password has already been
                        users.Try new password
                    </div>

                    <div *ngIf="!newPassword.valid && newPassword.touched">
                        <div class="text-danger" *ngIf="newPassword.errors?.['required']">New password is required
                        </div>
                        <div class="text-danger" *ngIf="newPassword.errors?.['minlength']">
                            New password
                            must be atleast
                            {{newPassword.errors?.['minlength']['requiredLength']}} characters</div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Confirm password" class="form-label">Confirm password<span
                            class="required">*</span></label>
                    <div class="input-group mb-3">

                        <input type="password" formControlName="confirmPassword" name="confirmPassword"
                            id="confirmPassword" #confirm class="form-control">
                        <span class="input-group-text">
                            <i class="bi" [ngClass]="confirm.type==='text'?'bi-eye-slash-fill':'bi-eye-fill'"
                                (click)="confirm.type==='text'?confirm.type='password':confirm.type='text'"></i>
                        </span>


                    </div>
                    <div *ngIf="!confirmPassword.valid && confirmPassword.touched">
                        <div class="text-danger" *ngIf="confirmPassword.errors?.['required']">Confirm password is
                            required</div>
                        <div class="text-danger" *ngIf="confirmPassword.errors?.['minlength']">
                            Confirm password
                            must be atleast
                            {{confirmPassword.errors?.['minlength']['requiredLength']}} characters</div>
                    </div>
                    <div class="text-danger"
                        *ngIf="!confirmPassword.errors?.['required'] && !confirmPassword.errors?.['minlength'] && confirmPassword.value!==newPassword.value">
                        Confirm password and new password must be same</div>
                </div>

                <input type="submit" class="btn btn-primary" value="Change Password"
                    [disabled]="!form.valid || newPassword.value!==confirmPassword.value">
            </form>
        </div>
    </div>
</div>